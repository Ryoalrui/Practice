<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ajax表单传送测试</title>
</head>
<body>
<h1>容量单位转换</h1>
<input type="text" id="byte" placeholder="请填写相对应的二进制值" size="25px">
<button onclick="test()">转换</button>

<script>
function test(){
  var x = document.getElementById("byte").value;
  if(x.length==0){
    alert('空手套白狼');
  }else{
  var xhr;
  if(window.XMLHttpRequest){
    xhr = new XMLHttpRequest();
  }else{
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xhr.open('POST','./02test.php');
  xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
  xhr.send('value='+x);
  xhr.onreadystatechange = function(){
    if(xhr.readyState==4){
      if(xhr.status==200){
      // document.getElementById("byte").value = xhr.responseText;
      var transform = JSON.parse(xhr.responseText);
      document.getElementById("byte").value = transform.res;
    }
   }
  }
 }
}
</script>
</body>
</html>
